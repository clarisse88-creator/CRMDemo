@page "/SupportTicket/{Id:int}"

@using Domain.Entities
@using Application.Services.Tickets
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]

@inject ITicketService TicketService

<PageTitle>Ticket</PageTitle>

<h3>Support Ticket</h3>

<div>
     @if (ticket != null)
    {
        <div class="card mt-3">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h3>Ticket Details</h3>
                <a href="/SupportTicket" class="btn btn-secondary">Back to List</a>
            </div>
            <div class="card-body">
                <dl class="row">
                    <dt class="col-sm-3">Id</dt>
                    <dd class="col-sm-9">@ticket.Id</dd>

                    <dt class="col-sm-3">CustomerId</dt>
                    <dd class="col-sm-9">@ticket.CustomerId</dd>

                    <dt class="col-sm-3">Subject</dt>
                    <dd class="col-sm-9">@ticket.Subject</dd>

                    <dt class="col-sm-3">Description</dt>
                    <dd class="col-sm-9">@ticket.Description</dd>

                    <dt class="col-sm-3">Status</dt>
                    <dd class="col-sm-9">@ticket.Status</dd>

                    <dt class="col-sm-3">CreatedAt</dt>
                    <dd class="col-sm-9">@ticket.CreatedAt</dd>

                    
                </dl>
            </div>
        </div>
    }
</div>
@code {
    [Parameter]
    public int Id { get; set; }
    
    private Ticket ticket;
    protected override void OnInitialized()
     {
       ticket = TicketService.GetTicketById(Id);
     } 
} 